<ui:composition
    template="/WEB-INF/templates/mgmt_master.xhtml"
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:p="http://primefaces.org/ui"
    xmlns:f="http://xmlns.jcp.org/jsf/core"
    xmlns:h="http://xmlns.jcp.org/jsf/html">

    <ui:define name="extra-meta">

        <f:metadata>
            <f:event type="preRenderView" listener="#{reportsBacking.init}" />
        </f:metadata>

    </ui:define>

    <ui:define name="windowTitle">
        #{bundle.reports_page_title}
    </ui:define>

    <ui:define name="content">

        <!-- Top Reports -->
        <div class="row">         
            <div class="col-lg-4 col-md-4 col-xs-12 small-margin-bottom">
                <p:outputPanel deferred="true" styleClass="box-item">
                    <h3>#{bundle.reports_users} <span class="count visitors">#{reportsBacking.userCount}</span></h3>
                    <p class="subtitle">#{bundle.reports_users_visitors}</p>
                </p:outputPanel>
            </div>
            <div class="col-lg-4 col-md-4 col-xs-12 small-margin-bottom">
                <p:outputPanel deferred="true" styleClass="box-item">
                    <h3>#{bundle.reports_sales} <span class="count sales">#{reportsBacking.salesCount}</span></h3>
                    <p class="subtitle">#{bundle.reports_sales_amount} <span id="sales_daterange" class="daterange-link">today</span></p>
                </p:outputPanel>
            </div>
            <div class="col-lg-4 col-md-4 col-xs-12 small-margin-bottom">
                <p:outputPanel deferred="true" styleClass="box-item">
                    <h3>#{bundle.reports_revenue} <span class="count income">$#{reportsBacking.totalRevenue}</span></h3>
                    <p class="subtitle">#{bundle.reports_revenue_total} <span id="revenue_daterange" class="daterange-link">today</span></p>
                </p:outputPanel>
            </div>
        </div> 

        <div id="sales_range_picker" class="row" style="display:none">
            <div class="container top-buffer" style="background-color:#fff;padding:1em;">

                <h:form id="form">
                    <p:growl id="msgs" showDetail="true" />

                    <h:panelGrid columns="2" cellpadding="200">
                        <h:panelGrid columns="1" cellpadding="5">
                            <p:outputLabel for="salesBegin" value="Start date:" />
                            <p:calendar id="salesBegin" value="#{reportsBacking.salesBegin}" mode="inline">
                                <p:ajax event="dateSelect" listener="#{reportsBacking.onDateSelect}" update="msgs" />
                            </p:calendar>

                        </h:panelGrid>    

                        <h:panelGrid columns="1" cellpadding="5" style="margin-left: 50px;">
                            <p:outputLabel for="salesEnd" value="End date:" />
                            <p:calendar id="salesEnd" value="#{reportsBacking.salesEnd}" mode="inline">
                                <p:ajax event="dateSelect" listener="#{reportsBacking.onDateSelect}" update="msgs" />
                            </p:calendar>
                        </h:panelGrid>
                    </h:panelGrid>
                </h:form>

            </div>
        </div>

        <!-- Secondary Reports -->
        <div class="row top-buffer">
            <div class="col-lg-3 col-md-6 col-xs-12 small-margin-bottom">
                <p:outputPanel deferred="true" styleClass="box-item-2">
                    <div class="initials blue">
                        #{bundle.reports_box_initials_loss}
                    </div>
                    <div class="box-info" style="padding:10px;">
                        <p style="color:#111;">
                            <span class="fa fa-arrow-down" style="color:#007be5;"></span> Total cost
                        </p>
                        <p style="color:#555;;margin-left:5px;">
                            $#{reportsBacking.totalCost}
                        </p>
                    </div>
                </p:outputPanel>
            </div>
            <div class="col-lg-3 col-md-6 col-xs-12 small-margin-bottom">
                <div class="box-item-2">
                    <div class="initials red">
                        #{bundle.reports_box_initials_profit}
                    </div>
                    <div class="box-info" style="padding:10px;">
                        <p style="color:#111;">
                            <span class="fa fa-plus-circle" style="color:#ef6262;"></span> Total profit
                        </p>
                        <p style="color:#555;;margin-left:5px;">
                            $#{reportsBacking.totalProfits}
                        </p>
                    </div>
                </div>
            </div>
            <div class="col-lg-3 col-md-6 col-xs-12 small-margin-bottom">
                <div class="box-item-2">
                    <div class="initials green">
                        #{bundle.reports_box_initials_tracks}
                    </div>
                    <div class="box-info" style="padding:10px;">
                        <p style="color:#111;">
                            <span class="fa fa-music" style="color:#20d077;"></span> Total track sales
                        </p>
                        <p style="color:#555;;margin-left:5px;">
                            #{reportsBacking.totalTracks}
                        </p>
                    </div>
                </div>
            </div>
            <div class="col-lg-3 col-md-6 col-xs-12 small-margin-bottom">
                <div class="box-item-2">
                    <div class="initials yellow">
                        #{bundle.reports_box_initials_albums}
                    </div>
                    <div class="box-info" style="padding:10px;">
                        <p style="color:#111;">
                            <span class="fa fa-play" style="color:#f9c851;"></span> Total album sales
                        </p>
                        <p style="color:#555;;margin-left:5px;">
                            #{reportsBacking.totalAlbums}
                        </p>
                    </div>
                </div>
            </div>
        </div>

        <div class="row top-buffer">
            <div class="container">
                <div class="col-md-12">
                    <div class="tabbable-panel">
                        <div class="tabbable-line">
                            <ul class="nav nav-tabs ">
                                <li class="active">
                                    <a href="#tab_default_1" data-toggle="tab" id="tab_link_1">Total Sales</a>
                                </li>
                                <li>
                                    <a href="#tab_default_2" data-toggle="tab" id="tab_link_2">Sales by Client</a>
                                </li>
                                <li>
                                    <a href="#tab_default_3" data-toggle="tab" id="tab_link_3">Sales by Track</a>
                                </li>
                                <li>
                                    <a href="#tab_default_4" data-toggle="tab" id="tab_link_4">Sales by Album</a>
                                </li>
                                <li>
                                    <a href="#tab_default_5" data-toggle="tab" id="tab_link_5">Sales by Artist</a>
                                </li>
                                <li>
                                    <a href="#tab_default_6" data-toggle="tab" id="tab_link_6">Top Sellers</a>
                                </li>
                                <li>
                                    <a href="#tab_default_7" data-toggle="tab" id="tab_link_7">Top Clients</a>
                                </li>
                                <li>
                                    <a href="#tab_default_8" data-toggle="tab" id="tab_link_8">Zero Tracks</a>
                                </li>
                                <li>
                                    <a href="#tab_default_9" data-toggle="tab" id="tab_link_9">Zero Clients</a>
                                </li>
                            </ul>

                            <div class="tab-content">
                                <!-- Reports Tab  -->
                                <div class="tab-pane active" id="tab_default_1">
                                    <ui:insert name="totalSales">
                                        <ui:include src="/WEB-INF/sections/reports/totalSales.xhtml"/>
                                    </ui:insert>
                                </div>
                                <!-- Sales by client lab -->
                                <div class="tab-pane" id="tab_default_2">
                                    <ui:insert name="salesByClient">
                                        <ui:include src="/WEB-INF/sections/reports/salesByClient.xhtml"/>
                                    </ui:insert>
                                </div>
                                <!-- Sales by track -->
                                <div class="tab-pane" id="tab_default_3">
                                    <ui:insert name="salesByTrack">
                                        <ui:include src="/WEB-INF/sections/reports/salesByTrack.xhtml"/>
                                    </ui:insert>
                                </div>
                                <!-- Sales by album -->
                                <div class="tab-pane" id="tab_default_4">
                                    <ui:insert name="salesByTrack">
                                        <ui:include src="/WEB-INF/sections/reports/salesByAlbum.xhtml"/>
                                    </ui:insert>
                                </div>
                                <!-- Sales by artist -->
                                <div class="tab-pane" id="tab_default_5">
                                    <ui:insert name="salesByTrack">
                                        <ui:include src="/WEB-INF/sections/reports/salesByArtist.xhtml"/>
                                    </ui:insert>
                                </div>
                                <!-- Top orders -->
                                <div class="tab-pane" id="tab_default_6">
                                    <ui:insert name="salesByTrack">
                                        <ui:include src="/WEB-INF/sections/reports/topSellers.xhtml"/>
                                    </ui:insert>
                                </div>
                                <!-- Top clients -->
                                <div class="tab-pane" id="tab_default_7">
                                   <ui:insert name="salesByTrack">
                                        <ui:include src="/WEB-INF/sections/reports/topClients.xhtml"/>
                                    </ui:insert>
                                </div>
                                <!-- Zero Tracks -->
                                <div class="tab-pane" id="tab_default_8">
                                    <ui:insert name="salesByTrack">
                                        <ui:include src="/WEB-INF/sections/reports/zeroTracks.xhtml"/>
                                    </ui:insert>
                                </div>
                                <!-- Zero users -->
                                <div class="tab-pane" id="tab_default_9">
                                    <ui:insert name="salesByTrack">
                                        <ui:include src="/WEB-INF/sections/reports/zeroClients.xhtml"/>
                                    </ui:insert>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

    </ui:define>

</ui:composition>

