<ui:composition 
    template="/WEB-INF/templates/mgmt_master.xhtml"
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:p="http://primefaces.org/ui"
    xmlns:f="http://xmlns.jcp.org/jsf/core"
    xmlns:h="http://xmlns.jcp.org/jsf/html">

    <ui:define name="title">
        <a href="../management/albumsList.xhtml"></a>
        <h:outputText value="#{bundle.ListAlbumTitle}"></h:outputText>
    </ui:define>

    <ui:define name="content">

        <h:outputText value="nothing selected" rendered="#{empty theAlbums.selectedAlbum}"/>

        <h:form>
            
            <h:panelGrid columns="2" rendered="#{not theAlbums.editable and not empty theAlbums.selectedAlbum}">
                <h:outputText value="Id:"/>
                <h:outputText value="#{theAlbums.selectedAlbum.id}" title="Id"/>
                <h:outputText value="Title:"/>
                <h:outputText value="#{theAlbums.selectedAlbum.title}" title="Title"/>
                <h:outputText value="ReleaseDate:"/>
                <h:outputText value="#{theAlbums.selectedAlbum.releaseDate}" title="ReleaseDate"/>
                <h:outputText value="RecordLabel:"/>
                <h:outputText value="#{theAlbums.selectedAlbum.recordLabel}" title="RecordLabel"/>
                <h:outputText value="NumTracks:"/>
                <h:outputText value="#{theAlbums.selectedAlbum.numTracks}" title="NumTracks"/>
                <h:outputText value="CreatedAt:"/>
                <h:outputText value="#{theAlbums.selectedAlbum.createdAt}" title="CreatedAt"/>
                <h:outputText value="CostPrice:"/>
                <h:outputText value="#{theAlbums.selectedAlbum.costPrice}" title="CostPrice"/>
                <h:outputText value="ListPrice:"/>
                <h:outputText value="#{theAlbums.selectedAlbum.listPrice}" title="ListPrice"/>
                <h:outputText value="SalePrice:"/>
                <h:outputText value="#{theAlbums.selectedAlbum.salePrice}" title="SalePrice"/>
                <h:outputText value="RemovedAt:"/>
                <h:outputText value="#{theAlbums.selectedAlbum.removedAt}" title="RemovedAt"/>
                <h:outputText value="Available:"/>
                <h:outputText value="#{theAlbums.selectedAlbum.available}" title="Available"/>
                <h:outputText value="Artist:"/>
                <h:outputText value="#{theAlbums.selectedAlbum.artist.name}" title="Artist"/>
                
                <h:outputText value="Tracks:"/>
                <p:dataTable id="tbl" value="#{theAlbums.selectedAlbum.tracks}" var="item" rows="20" style="margin-bottom:20px">
                <p:column>
                    <f:facet name="header"><h:outputText value="Id"/></f:facet><h:outputText value="#{item.id}"/>
                </p:column>              
                </p:dataTable>

                <p:commandButton action="#{theAlbums.makeEditable()}" value="Edit" ajax="false"/>                             
                <p:commandButton action="#{theAlbums.delete()}" value="Delete" ajax="false"/>
<!--                 <p:confirm header="Delete album" message="Are you sure?" icon="ui-icon-alert" /> 
                </p:commandButton>
            
            <p:confirmDialog global="true" showEffect="fade" hideEffect="fade">
                <p:commandButton value="Yes" styleClass="ui-confirmdialog-yes" icon="ui-icon-check" />
                <p:commandButton value="No"  styleClass="ui-confirmdialog-no" icon="ui-icon-close" />
            </p:confirmDialog>
            https://stackoverflow.com/questions/24957293/pcommandbutton-action-not-working-in-pconfirmdialog
-->

            </h:panelGrid>

            <h:panelGrid columns="2" rendered="#{theAlbums.editable and not empty theAlbums.selectedAlbum}">
                <p:outputLabel value="Id:" for="id" />
                <p:inputText id="id" value="#{theAlbums.selectedAlbum.id}" title="Id" disabled="true"/>
                <p:outputLabel value="Title:" for="title" />
                <p:inputText id="title" value="#{theAlbums.selectedAlbum.title}" title="Title" required="true" requiredMessage="The Title field is required."/>
                <p:outputLabel value="ReleaseDate:" for="releaseDate" />
                <p:inputText id="releaseDate" value="#{theAlbums.selectedAlbum.releaseDate}" title="ReleaseDate" disabled="true"/>
                <p:outputLabel value="RecordLabel:" for="recordLabel" />
                <p:inputText id="recordLabel" value="#{theAlbums.selectedAlbum.recordLabel}" title="RecordLabel" required="true" requiredMessage="The RecordLabel field is required."/>
                <p:outputLabel value="NumTracks:" for="numTracks" />
                <p:inputText id="numTracks" value="#{theAlbums.selectedAlbum.numTracks}" title="NumTracks" required="true" requiredMessage="The NumTracks field is required."/>
                <p:outputLabel value="CreatedAt:" for="createdAt" />
                <p:inputText id="createdAt" value="#{theAlbums.selectedAlbum.createdAt}" title="CreatedAt" disabled="true"/>
                <p:outputLabel value="CostPrice:" for="costPrice" />
                <p:inputText id="costPrice" value="#{theAlbums.selectedAlbum.costPrice}" title="CostPrice" required="true" requiredMessage="The CostPrice field is required."/>
                <p:outputLabel value="ListPrice:" for="listPrice" />
                <p:inputText id="listPrice" value="#{theAlbums.selectedAlbum.listPrice}" title="ListPrice" required="true" requiredMessage="The ListPrice field is required."/>
                <p:outputLabel value="SalePrice:" for="salePrice" />
                <p:inputText id="salePrice" value="#{theAlbums.selectedAlbum.salePrice}" title="SalePrice" required="true" requiredMessage="The SalePrice field is required."/>
                <p:outputLabel value="RemovedAt:" for="removedAt" />
                <p:inputText id="removedAt" value="#{theAlbums.selectedAlbum.removedAt}" title="RemovedAt" disabled="true"/>
                <p:outputLabel value="Available:" for="available" />
                <p:selectBooleanCheckbox id="available" value="#{theAlbums.selectedAlbum.available}" />
                <p:outputLabel value="Artist:" for="artist" />

                <p:selectOneMenu id="artist" value="#{theAlbums.selectedAlbum.artist}" disabled="true">
                    <f:selectItems value="#{theArtists.artists}"/>
                </p:selectOneMenu> 
              
                <p:commandButton action="#{theAlbums.edit()}" value="Save" ajax="false"/>
                <p:commandButton action="#{theAlbums.makeUneditable()}" value="Cancel" ajax="false"/>
                
            </h:panelGrid>
            
           <!--si l'artiste n'existe, dialog "voulez vous le creer"
          release date and artist greyed out because annoying (whole thing still not working yet)
           On cascade delete avec les tracks si non impossible de supprimer un album...
           -->                
        </h:form>  
        
        <p:button value="Retour Ã  la liste" outcome="/management/album/albumsList.xhtml"/>
          
    </ui:define>
</ui:composition>


