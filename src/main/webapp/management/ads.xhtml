<ui:composition 
    template="/WEB-INF/templates/mgmt_master.xhtml"
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:p="http://primefaces.org/ui"
    xmlns:f="http://xmlns.jcp.org/jsf/core"
    xmlns:h="http://xmlns.jcp.org/jsf/html">

    <ui:define name="windowTitle">
        <h:outputText value="#{bundle.ListBannerAdTitle}"></h:outputText>
    </ui:define>

    <ui:define name="placeholder-css">
        <h:outputStylesheet library="css" name="mgmt_crud.css" />
    </ui:define>

    <ui:define name="content">    
         
        <h:form id="form">

            <p:growl id="growl" showDetail="true" sticky="true" /> 
           
            <p:dataGrid var="item" value="#{theBannerAds.bannerAds}" columns="3" layout="grid"
                        rows="12" paginator="true" id="tbl"
                        paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                        rowsPerPageTemplate="6,12,16">

                <f:facet name="header">
                    <h:outputText value="#{bundle.ListBannerAdTitle}"/>
                </f:facet>

                <p:panel header="#{item.id}" style="text-align:center">
                    <h:panelGrid columns="1" style="width:100%">
                        <p:graphicImage value="#{item.link}" width="100%"/> 
                        <h:outputText value="Source : #{item.source}" />
                        <p:commandButton value="#{bundle.mgmt_btn_edit}" process="tbl" update="dialogForm" onclick="PF('dialogViewEdit').show()" class="mgmt_btn">
                            <f:setPropertyActionListener value="#{item}" target="#{theBannerAds.selectedBannerAd}" />
                        </p:commandButton>
                    </h:panelGrid>
                </p:panel>

                <f:facet name="footer">
                    <p:commandButton value="#{bundle.mgmt_btn_create}" icon="fa fa-search" onclick="PF('dialogCreate').show()" class="mgmt_btn" />                  
                </f:facet>

            </p:dataGrid>

        </h:form>

        <p:dialog header="Ad Info" widgetVar="dialogViewEdit" dynamic="true">
            <h:form id="dialogForm">

                <h:outputText value="Nothing selected" rendered="#{empty theBannerAds.selectedBannerAd}"/>

                <p:panelGrid columns="2"  rendered="#{not empty theBannerAds.selectedBannerAd}">
                    <p:outputLabel value="Id:" for="id" />
                    <p:inputText id="id" value="#{theBannerAds.selectedBannerAd.id}" disabled="true" title="Id" required="true" requiredMessage="The Id field is required."/>
                    <p:outputLabel value="Link:" for="link" />
                    <p:inputText id="link" value="#{theBannerAds.selectedBannerAd.link}" title="Link" required="true" requiredMessage="The Link field is required."/>
                    <p:outputLabel value="Source:" for="source" />
                    <p:inputText id="source" value="#{theBannerAds.selectedBannerAd.source}" title="Source" required="true" requiredMessage="The Source field is required."/>
                    <p:outputLabel value="Visible:" for="visible" />
                    <p:selectBooleanButton id="visible" value="#{theBannerAds.selectedBannerAd.visible}" onLabel="Yes" offLabel="No" style="width:60px"  class="mgmt_btn"/>

                    <p:commandButton actionListener="#{theBannerAds.edit()}" value="Save" update="form,dialogForm" class="mgmt_btn">
                        <p:confirm header="Confirmation" message="Are you sure?" icon="ui-icon-alert" />
                    </p:commandButton>

                    <p:commandButton  value="Exit" onclick="PF('dialogViewEdit').hide()" class="mgmt_btn"/>

                    <p:confirmDialog global="true" showEffect="fade" hideEffect="fade">
                        <p:commandButton value="Yes" type="button" styleClass="ui-confirmdialog-yes" icon="ui-icon-check" />
                        <p:commandButton value="No" type="button" styleClass="ui-confirmdialog-no" icon="ui-icon-close" />
                    </p:confirmDialog> 

                </p:panelGrid>

            </h:form>

        </p:dialog>

        <p:dialog header="Create Ad" widgetVar="dialogCreate" dynamic="true">
            <h:form id="dialogForm2">

                <p:panelGrid columns="2">
                    <p:outputLabel value="Link:" for="link" />
                    <p:inputText id="link" value="#{theBannerAds.createdBannerAd.link}" title="Link" required="true" requiredMessage="The Link field is required."/>
                    <p:outputLabel value="Source:" for="source" />
                    <p:inputText id="source" value="#{theBannerAds.createdBannerAd.source}" title="Source" required="true" requiredMessage="The Source field is required."/>
                    <p:outputLabel value="Visible:" for="visible" />
                    <p:selectBooleanButton id="visible" value="#{theBannerAds.createdBannerAd.visible}" onLabel="Yes" offLabel="No" style="width:60px"  class="mgmt_btn"/>

                    <p:commandButton  value="Create" actionListener="#{theBannerAds.create()}" update="form,dialogForm,dialogForm2" class="mgmt_btn"/>
                    <p:commandButton  value="Exit" onclick="PF('dialogCreate').hide()" class="mgmt_btn"/>

                    <h:panelGroup>
                        <script>
                            if (#{!facesContext.validationFailed}) {
                                PF('dialogCreate').hide();
                                PF('dialogViewEdit').show();
                            }
                        </script>
                    </h:panelGroup>    

                </p:panelGrid>

            </h:form>

        </p:dialog>

    </ui:define>
</ui:composition>
