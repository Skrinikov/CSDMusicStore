<ui:composition 
    template="/WEB-INF/templates/mgmt_master.xhtml"
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:p="http://primefaces.org/ui"
    xmlns:f="http://xmlns.jcp.org/jsf/core"
    xmlns:h="http://xmlns.jcp.org/jsf/html">

    <ui:define name="title">
        <h:outputText value="#{bundle.ViewOrderTitle}"></h:outputText>
    </ui:define>

    <ui:define name="placeholder-css">
        <h:outputStylesheet library="css" name="mgmt_crud.css" />
    </ui:define>

    <ui:define name="content">
        <!-- if nothing selected -->
        <h:panelGroup rendered="#{empty theOrders.selectedOrder}">
            <h:form>
                <div class="container">
                    <h:outputText value="nothing selected" />
                    <div class="row">
                        <h:commandButton class="mgmt_btn" value="Retour Ã  la liste" action="#{theOrders.returnToPage()}"/>
                    </div>
                </div>
            </h:form>
        </h:panelGroup>


        <!-- if something selected -->
        <h:panelGroup  rendered="#{not empty theOrders.selectedOrder}">
            <h:form>


                <!-- Header -->

                <div class="container newContainer">
                    <div class="panel-heading">
                        <h1>Order Details</h1>
                    </div>
                </div>

                
                <div class="container newContainer" >
                    <div style="margin-bottom: 5px;" >
                        <h:panelGroup>
                            <div class="form-group row"><h:outputText value="Order Id:" class="control-label mgmt_detail_label col-sm-2"/>
                            <h:outputText value="#{theOrders.selectedOrder.id}" title="Id"/></div>
                            <div class="form-group row"><h:outputText value="OrderDate:" class="control-label mgmt_detail_label col-sm-2"/>
                            <h:outputText value="#{theOrders.selectedOrder.orderDate}" title="OrderDate"/></div>
                            <div class="form-group row"><h:outputText value="NetCost:" class="control-label mgmt_detail_label col-sm-2"/>
                            <h:outputText value="#{theOrders.selectedOrder.netCost}" title="NetCost"/></div>
                            <div class="form-group row"><h:outputText value="GrossCost:" class="control-label mgmt_detail_label col-sm-2"/>
                            <h:outputText value="#{theOrders.selectedOrder.grossCost}" title="GrossCost"/></div>
                            <div class="form-group row"><h:outputText value="User:" class="control-label mgmt_detail_label col-sm-2"/>
                            <h:outputText value="#{theOrders.selectedOrder.user.username}" title="User"/></div>
                        </h:panelGroup>
                    </div>
                    
                </div>
                
                
                <div class="container newContainer">
                    
                    <p:dataTable draggableColumns="true" resizableColumns="true" reflow="true" rowStyleClass="mgmt_table_row"  value="#{theOrders.orderItemsOfOrder}" var="item">
                            <p:column headerText="Id" >
                                <h:outputText value="#{item.id}"/>
                            </p:column>
                            <p:column headerText="Album">
                                <h:outputText value="#{item.album.title}"/>
                            </p:column>
                            <p:column headerText="Track">
                                <h:outputText value="#{item.track.title}"/>
                            </p:column>
                            <p:column headerText="Cost">
                                <h:outputText value="#{item.cost}"/>
                            </p:column>

                            <p:column headerText="Cancelled">
                                <h:outputText value="#{item.cancelled}"/>   
                            </p:column>


                            <p:column headerText="Delete order item">
                                <h:commandButton class="mgmt_btn" value="Delete Order item " action="#{theOrders.deleteOrderItem(item)}"/>
                            </p:column>
                        </p:dataTable>
                    
                    <h:commandButton class="mgmt_btn" value="Delete Order" action="#{theOrders.deleteOrder()}"/>
                <h:commandButton class="mgmt_btn" value="Retour Ã  la liste" action="#{theOrders.returnToPage()}"/>
                </div>







                
            </h:form>

        </h:panelGroup>



    </ui:define>
</ui:composition>


