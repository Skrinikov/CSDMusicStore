<?xml version="1.0" encoding="UTF-8"?>

<ui:composition 
    template="/WEB-INF/templates/master.xhtml"
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:p="http://primefaces.org/ui"
    xmlns:f="http://xmlns.jcp.org/jsf/core"
    xmlns:h="http://xmlns.jcp.org/jsf/html">
    
    
    <!-- 
    
    This jsf page will be used to display the tracks and albums purchased 
    by the user
    
    @author Renuchan
    
    -->
    
    
    
    <ui:define name="windowTitle">
        <h:outputText value="Purchase History"></h:outputText>
    </ui:define>
    
   <ui:define name="content">
        <div id="shop-content" class="a-content">
            <div class="panel-heading">
                <h2 class="centerText">#{bundle.myTracks}</h2>
            </div>
            <div class="panel-body">
                <ui:fragment rendered="true">
                    <h:form >
                        <h:dataTable value="#{DLController.tracks}" var="item"
                                 class="table table-striped table-hover table-cart table-condensed">
                        <h:column>    
                            <p:graphicImage name="images/covers/#{item.coverFile}" style="max-height: 75px"/>
                         </h:column>
                        <h:column>    				
                            <f:facet name="header">#{bundle.type}</f:facet>    				
                            #{bundle.itemTypeTrack}
                         </h:column>
                         <h:column>
                            <f:facet name="header">#{bundle.title}</f:facet>
                            #{item.title}
                         </h:column>
                         <h:column>
                            <f:facet name="header">#{bundle.artist}</f:facet>
                            #{DLController.getArtistName(item.artists)}
                         </h:column>
                         
                        <h:column>                      
                            <p:commandButton ajax="false" icon="ui-icon-arrowthick-1-s">
                                    <p:fileDownload value="#{DLController.downloadSong()}" />
                            </p:commandButton>
                        </h:column>
                    </h:dataTable>
                    </h:form>            

                </ui:fragment>
                
            </div>
            
            <!-- Dislay purchased Albums -->
            
            <div class="panel-heading">
                <h2 class="centerText">#{bundle.myAlbums}</h2>
            </div>
            <div class="panel-body">
                <ui:fragment rendered="true">
                    <h:form >
                        <h:dataTable value="#{DLController.albums}" var="albs"
                                 class="table table-striped table-hover table-cart table-condensed">
                        <h:column>    
                            <p:graphicImage name="images/covers/music-note.png" style="max-height: 75px"/>
                         </h:column>
                        <h:column>    				
                            <f:facet name="header">#{bundle.type}</f:facet>    				
                            #{bundle.itemTypeAlbum}
                         </h:column>
                         <h:column>
                            <f:facet name="header">#{bundle.title}</f:facet>
                            #{albs.title}
                         </h:column>
                         <h:column>
                            <f:facet name="header">#{bundle.Dl_rc}</f:facet>
                            #{albs.recordLabel}
                         </h:column>
                         
                        <h:column>                      
                            <p:commandButton ajax="false" icon="ui-icon-arrowthick-1-s">
                                    <p:fileDownload value="#{DLController.downloadSong()}" />
                            </p:commandButton>
                        </h:column>
                    </h:dataTable>
                    </h:form>            

                </ui:fragment>
            </div>
            
            
            
        </div>
    </ui:define>
</ui:composition>

