<?xml version="1.0" encoding="UTF-8"?>

<ui:composition 
    template="/WEB-INF/templates/master.xhtml"
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:p="http://primefaces.org/ui"
    xmlns:f="http://xmlns.jcp.org/jsf/core"
    xmlns:h="http://xmlns.jcp.org/jsf/html">
    
    
    <!-- 
    
    This jsf page will be used to display the tracks and albums purchased 
    by the user
    
    @author Renuchan
    
    -->
    
    
    
    <ui:define name="windowTitle">
        <h:outputText value="Purchase History"></h:outputText>
    </ui:define>
    
    <ui:define name="content">
        
        
        <h2> My Tracks </h2>
        <br />
        
        <div class="container">
            <div class="row">
        
                
            <h:form>
                <ui:repeat value="#{DLController.getTracks()}" var="item">    
  
                <div class="col-xs-18 col-sm-6 col-md-3">
                  <div class="thumbnail">
 
                        <p:graphicImage name="images/covers/#{item.coverFile}" style="max-height: 155px"/>
                        
                        <div class="caption">
                            <h4 class="centerText">#{item.title}</h4>
                            <p class="centerText">#{DLController.getArtistsName(item.artists)} </p>
                            <p:commandButton ajax="false" onclick="PrimeFaces.monitorDownload(start, stop);" icon="ui-icon-arrowthick-1-s">
                                <p:fileDownload value="#{DLController.downloadSong()}" />
                            </p:commandButton>
 
                        </div>
                    </div>
                </div>              
                </ui:repeat>
            </h:form>        
                    
                    
                    
            </div><!--/row-->
        </div><!--/container -->
        
        <h2> My Albums </h2>
        <br />
        
        
        <div class="container">
            <div class="row">
        
            <h:form>
                <ui:repeat value="#{DLController.albums}" var="alb">    
  
                <div class="col-xs-18 col-sm-6 col-md-3">
                    <div class="thumbnail">
 
                        <p:graphicImage name="images/covers/music-note.png" style="max-height: 155px"/>
                        
                        <div class="caption">
                            <h4 class="centerText">#{alb.recordLabel}</h4>
                            <p class="centerText">#{alb.artist.name} </p>
                        </div>
                    </div>
                </div>

                    
                </ui:repeat>
            </h:form>        
                 
            </div><!--/row-->
        </div><!--/container -->
        
        
        <script type="text/javascript">
            function start() {
                PF('statusDialog').show();
            }

            function stop() {
                PF('statusDialog').hide();
            }
        </script>
        
            
    </ui:define>
</ui:composition>

